s3_bucket: staging.opendatakit.org
s3_endpoint: us-west-2

site: _site

error_document: 404.html

max_age: 300
gzip: true

exclude_from_upload:
  - s3_website.yml
  - CNAME

cloudfront_distribution_id: E24Q6N70UTYYB6

cloudfront_distribution_config:
  default_cache_behavior:
    min_ttl: <%= 60 * 60 * 24 %>
  aliases:
    quantity: 1
    items:
      - staging.opendatakit.org

cloudfront_wildcard_invalidation: true

routing_rules:
  - condition:
      key_prefix_equals: help/form-design
    redirect:
      host_name: docs.opendatakit.org
      replace_key_with: form-design-intro
      http_redirect_code: 301
  - condition:
      key_prefix_equals: use/aggregate
    redirect:
      host_name: docs.opendatakit.org
      replace_key_with: aggregate-intro
      http_redirect_code: 301
  - condition:
      key_prefix_equals: use/briefcase
    redirect:
      host_name: docs.opendatakit.org
      replace_key_with: briefcase-intro
      http_redirect_code: 301
  - condition:
      key_prefix_equals: use/build
    redirect:
      host_name: docs.opendatakit.org
      replace_key_with: build-intro
      http_redirect_code: 301
  - condition:
      key_prefix_equals: use/collect
    redirect:
      host_name: docs.opendatakit.org
      replace_key_with: collect-intro
      http_redirect_code: 301
  - condition:
      key_prefix_equals: use/xls
    redirect:
      host_name: docs.opendatakit.org
      replace_key_with: xlsform
      http_redirect_code: 301
  - condition:
      key_prefix_equals: about
    redirect:
      host_name: staging.opendatakit.org
      replace_key_with: ""
      http_redirect_code: 301
  - condition:
      key_prefix_equals: downloads
    redirect:
      host_name: staging.opendatakit.org
      replace_key_with: software
      http_redirect_code: 301
  - condition:
      key_prefix_equals: participate
    redirect:
      host_name: staging.opendatakit.org
      replace_key_with: community
      http_redirect_code: 301
  - condition:
      key_prefix_equals: use
    redirect:
      host_name: docs.opendatakit.org
      replace_key_with: ""
      http_redirect_code: 301
  - condition:
      key_prefix_equals: xiframe
    redirect:
      host_name: xlsform.opendatakit.org
      replace_key_with: ""
      http_redirect_code: 301
